pico-8 cartridge // http://www.pico-8.com
version 43
__lua__
-- init e update

function _init()
  t=0
  dirx={-1,1,0,0}
  diry={0,0,-1,1}
  _upd=update_game
  _drw=draw_game
  start_game()
end

function _update()
  t+=1
  _upd()
end

function _draw()
  _drw()
end
-->8
-- game

-- player

p = {
  spr = {16,17},
  x = 0,
  y = 0,
  ox = 0,
  oy = 0,
  tile_size = 8
}

function start_game()
  p.x = 8 * p.tile_size
  p.y = 13 * p.tile_size
end

function update_game()
  for i = 0,3 do
    if btnp(i) then
      local dx = dirx[i+1] * p.tile_size
      local dy = diry[i+1] * p.tile_size
      p.x += dx
      p.y += dy
      p.ox = -dx
      p.oy = -dy
      _upd = update_pturn
      return
    end
  end
end


function update_pturn()
  if p.ox>0 then
    p.ox-=1
  end
  if p.ox<0 then
    p.ox+=1
  end
  if p.oy>0 then
    p.oy-=1
  end
  if p.oy<0 then
    p.oy+=1
  end
  if p.ox==0 and p.oy==0 then
    _upd=update_game
  end
end

function draw_game()
  cls()
  map(0, 0, 0, 0, 16, 16)
  spr(get_frame(p.spr), p.x + p.ox, p.y + p.oy)
end

-->8
-- auxiliares

function get_frame(ani)
  return ani[flr(t/8)%#ani+1]
end
__gfx__
0000000033333333dddddddd00555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000033333333d555555d05666650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070033333333d555555d56666660006660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700033333333d555555d56dddd60006666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000333333336666666656666660000660600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700333333331111111156666660000066600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000333333331111111156666360000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000003333333f1111111156363360000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00222220000000000222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02211112002222202111122000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
22171712022111122171712200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
22171712221717122171712200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02111112221717122111112000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00222220021111120222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02221220002222200221222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02211220022212200221122000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00111100001111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
01667711016677110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
16677771166777710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
16707071167070710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
16707071167070710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
16777771167777710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
16716161161616610000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
01101010010101100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010101010101010101010101010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010101010101010101010101010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010101010101010101010101010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010101010101010101010101010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010101010101010101010101010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010101020101010101010101010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010101020101010202020201010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010101020101010101010101010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010101020101010101010101010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010101010101010101010101010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010101010101010101010101010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010101010101010101010101010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010101010101010101010101010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010101010101010101010101010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
